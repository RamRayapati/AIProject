<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoulMate.AGI</title>
    <link href="https://fonts.googleapis.com/css2?family=Georgia&family=Poppins&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.5s;
            background: #2F2F2F;
            color: #A9B7A0;
        }

        /* Light Theme (Emotional Serenity) */
        body.light {
            background: #2F2F2F;
            color: #A9B7A0;
        }

        body.light .header {
            background: linear-gradient(90deg, #6D8299, #A9B7A0);
            color: #A9B7A0;
            border-bottom: 4px solid #6D8299;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(109, 130, 153, 0.3);
        }

        body.light .nav-link {
            color: #A9B7A0;
            text-shadow: 0 0 5px #6D8299;
        }

        body.light .nav-link:hover {
            color: #6D8299;
            background: rgba(109, 130, 153, 0.2);
            text-shadow: 0 0 10px #6D8299;
            text-decoration: none;
        }

        body.light .hero-banner, body.light .page-container {
            background: linear-gradient(135deg, #2F2F2F, #6D8299);
            color: #A9B7A0;
            box-shadow: 0 10px 30px rgba(109, 130, 153, 0.2);
            border: 1px solid rgba(109, 130, 153, 0.1);
        }

        body.light .mood-prompt {
            background: rgba(47, 47, 47, 0.9);
            box-shadow: 0 6px 20px rgba(109, 130, 153, 0.2);
            color: #A9B7A0;
            border: 1px solid #6D8299;
        }

        body.light .mood-prompt input, body.light .journal-input, body.light .search-input {
            border: 1px solid #6D8299;
            background: #2F2F2F;
            color: #A9B7A0;
        }

        body.light .mood-prompt input:focus, body.light .journal-input:focus, body.light .search-input:focus {
            box-shadow: 0 0 15px #6D8299;
            outline: none;
        }

        body.light .emoji-buttons button, body.light .action-btn, body.light .wellness-btn, body.light .chat-btn {
            background: linear-gradient(45deg, #D4A017, #D8A7B1);
            color: #2F2F2F;
            border: none;
            text-shadow: 0 0 5px #D4A017;
        }

        body.light .home-card, body.light .card {
            background: rgba(47, 47, 47, 0.8);
            border: 1px solid #6D8299;
            color: #A9B7A0;
            box-shadow: 0 6px 20px rgba(109, 130, 153, 0.1);
        }

        body.light .home-card h3, body.light .card h3 {
            color: #6D8299;
            text-shadow: 0 0 5px #6D8299;
        }

        body.light .home-card p, body.light .card p {
            color: #D8A7B1;
        }

        body.light .chat-container {
            background: rgba(47, 47, 47, 0.7);
            color: #A9B7A0;
        }

        body.light .chat-bubble-user {
            background: #D4A017;
            color: #2F2F2F;
        }

        body.light .chat-bubble-ai {
            background: #D8A7B1;
            color: #2F2F2F;
        }

        body.light .input-bar {
            background: rgba(47, 47, 47, 0.9);
            border-top: 1px solid #6D8299;
        }

        body.light .input-bar input {
            color: #A9B7A0;
        }

        body.light .sentiment-meter {
            background: rgba(47, 47, 47, 0.8);
            color: #6D8299;
        }

        body.light .profile-options, body.light .settings-options {
            background: #2F2F2F;
            color: #A9B7A0;
            border: 1px solid #6D8299;
        }

        body.light .profile-options a:hover, body.light .settings-options a:hover {
            background: #6D8299;
            color: #2F2F2F;
        }

        body.light .footer {
            background: linear-gradient(90deg, #6D8299, #A9B7A0);
            color: #A9B7A0;
            border-top: 4px solid #6D8299;
            box-shadow: 0 -4px 15px rgba(109, 130, 153, 0.3);
        }

        body.light .footer a {
            color: #A9B7A0;
            text-shadow: 0 0 5px #6D8299;
        }

        body.light #journal-page #journal-feedback {
            background: rgba(47, 47, 47, 0.8);
            color: #A9B7A0;
            border: 1px solid #6D8299;
        }

        body.light #journal-page #journal-feedback p {
            color: #D8A7B1;
        }

        body.light #journal-page #journal-feedback .action-btn {
            color: #2F2F2F;
        }

        /* Dark Theme (Enhanced Emotional Depth) */
        body.dark {
            background: #2F2F2F;
            color: #D8A7B1;
        }

        body.dark .header {
            background: linear-gradient(90deg, #2F2F2F, #6D8299);
            color: #D8A7B1;
            border-bottom: 4px solid #D4A017;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(212, 160, 23, 0.3);
        }

        body.dark .nav-link {
            color: #D8A7B1;
            text-shadow: 0 0 5px #D4A017;
        }

        body.dark .nav-link:hover {
            color: #D1E8E2;
            background: rgba(212, 160, 23, 0.2);
            text-shadow: 0 0 10px #D4A017;
            text-decoration: none;
        }

        body.dark .hero-banner, body.dark .page-container {
            background: linear-gradient(135deg, #2F2F2F, #6D8299);
            color: #D8A7B1;
            box-shadow: 0 10px 30px rgba(212, 160, 23, 0.2);
            border: 1px solid rgba(212, 160, 23, 0.1);
        }

        body.dark .mood-prompt {
            background: rgba(47, 47, 47, 0.9);
            box-shadow: 0 6px 20px rgba(212, 160, 23, 0.2);
            color: #D8A7B1;
            border: 1px solid #D4A017;
        }

        body.dark .mood-prompt input, body.dark .journal-input, body.dark .search-input {
            border: 1px solid #D4A017;
            background: #2F2F2F;
            color: #D8A7B1;
        }

        body.dark .mood-prompt input:focus, body.dark .journal-input:focus, body.dark .search-input:focus {
            box-shadow: 0 0 15px #D4A017;
            outline: none;
        }

        body.dark .emoji-buttons button, body.dark .action-btn, body.dark .wellness-btn, body.dark .chat-btn {
            background: linear-gradient(45deg, #6D8299, #D4A017);
            color: #2F2F2F;
            border: none;
            text-shadow: 0 0 5px #D4A017;
        }

        body.dark .home-card, body.dark .card {
            background: rgba(47, 47, 47, 0.8);
            border: 1px solid #D4A017;
            color: #D8A7B1;
            box-shadow: 0 6px 20px rgba(212, 160, 23, 0.1);
        }

        body.dark .home-card h3, body.dark .card h3 {
            color: #D4A017;
            text-shadow: 0 0 5px #D4A017;
        }

        body.dark .home-card p, body.dark .card p {
            color: #A9B7A0;
        }

        body.dark .chat-container {
            background: rgba(47, 47, 47, 0.7);
            color: #D8A7B1;
        }

        body.dark .chat-bubble-user {
            background: #6D8299;
            color: #2F2F2F;
        }

        body.dark .chat-bubble-ai {
            background: #D4A017;
            color: #2F2F2F;
        }

        body.dark .input-bar {
            background: rgba(47, 47, 47, 0.9);
            border-top: 1px solid #D4A017;
        }

        body.dark .input-bar input {
            color: #D8A7B1;
        }

        body.dark .sentiment-meter {
            background: rgba(47, 47, 47, 0.8);
            color: #D4A017;
        }

        body.dark .profile-options, body.dark .settings-options {
            background: #2F2F2F;
            color: #D8A7B1;
            border: 1px solid #D4A017;
        }

        body.dark .profile-options a:hover, body.dark .settings-options a:hover {
            background: #D4A017;
            color: #2F2F2F;
        }

        body.dark .footer {
            background: linear-gradient(90deg, #2F2F2F, #6D8299);
            color: #D8A7B1;
            border-top: 4px solid #D4A017;
            box-shadow: 0 -4px 15px rgba(212, 160, 23, 0.3);
        }

        body.dark .footer a {
            color: #D8A7B1;
            text-shadow: 0 0 5px #D4A017;
        }

        body.dark #journal-page #journal-feedback {
            background: rgba(47, 47, 47, 0.8);
            color: #D8A7B1;
            border: 1px solid #D4A017;
        }

        body.dark #journal-page #journal-feedback p {
            color: #A9B7A0;
        }

        body.dark #journal-page #journal-feedback .action-btn {
            color: #2F2F2F;
        }

        /* Advanced Thematic Motion Graphics Background */
        .dynamic-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        /* Heartbeat Pulses */
        .pulse-ring {
            position: absolute;
            border: 2px solid #6D8299;
            border-radius: 50%;
            animation: heartbeat 3s infinite;
        }

        /* Flowing Energy Lines */
        .energy-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(to right, #D4A017, #D8A7B1);
            animation: flowLine 6s infinite linear;
        }

        /* Evolving Shapes */
        .evolving-shape {
            position: absolute;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            background: #A9B7A0;
            animation: evolveShape 8s infinite ease-in-out;
        }

        /* Particle Swirls */
        .particle-swirl {
            position: absolute;
            border-radius: 50%;
            background: rgba(169, 183, 160, 0.6);
            animation: swirlParticle 10s infinite linear;
        }

        /* Animations */
        @keyframes heartbeat {
            0% { transform: scale(0.5); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(0.5); opacity: 0.5; }
        }

        @keyframes flowLine {
            0% { width: 0; left: 0; }
            50% { width: 100vw; }
            100% { width: 0; left: 100vw; }
        }

        @keyframes evolveShape {
            0% { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); transform: scale(0.8); }
            25% { clip-path: polygon(20% 0%, 80% 0%, 100% 50%, 80% 100%, 20% 100%, 0% 50%); transform: scale(1); }
            50% { clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%); transform: scale(1.2); }
            75% { clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%); transform: scale(1); }
            100% { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); transform: scale(0.8); }
        }

        @keyframes swirlParticle {
            0% { transform: translate(-50vw, -50vh) rotate(0deg); opacity: 0.8; }
            25% { transform: translate(50vw, -50vh) rotate(90deg); opacity: 0.6; }
            50% { transform: translate(50vw, 50vh) rotate(180deg); opacity: 0.4; }
            75% { transform: translate(-50vw, 50vh) rotate(270deg); opacity: 0.6; }
            100% { transform: translate(-50vw, -50vh) rotate(360deg); opacity: 0.8; }
        }

        @keyframes glow {
            0% { text-shadow: 0 0 10px #6D8299; }
            50% { text-shadow: 0 0 20px #6D8299; }
            100% { text-shadow: 0 0 10px #6D8299; }
        }

        @keyframes glow-dark {
            0% { text-shadow: 0 0 10px #D4A017; }
            50% { text-shadow: 0 0 20px #D4A017; }
            100% { text-shadow: 0 0 10px #D4A017; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* General Styles */
        .header {
            padding: 20px;
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
        }

        .header .logo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: url('soul_main.jpg') no-repeat center;
            background-size: cover;
            margin-right: 15px;
            box-shadow: 0 0 10px #6D8299;
            animation: pulse 4s infinite;
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 60px;
            color: #6D8299;
            text-align: center;
            flex: 1;
            animation: glow 2s ease-in-out infinite;
            text-shadow: 0 0 10px #6D8299;
        }

        body.dark .header h1 {
            animation: glow-dark 2s ease-in-out infinite;
            color: #D4A017;
            text-shadow: 0 0 10px #D4A017;
        }

        .right-container {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }

        .nav-container {
            display: flex;
            justify-content: flex-end;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-link {
            text-decoration: none;
            font-size: 18px;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .icons-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .profile-container, .settings-container {
            position: relative;
        }

        .profile-circle {
            border-radius: 50%;
            width: 60px;
            height: 60px;
            object-fit: cover;
            border: 3px solid #6D8299;
            transition: transform 0.3s;
            cursor: pointer;
            box-shadow: 0 0 5px #6D8299;
        }

        body.dark .profile-circle {
            border: 3px solid #D4A017;
            box-shadow: 0 0 5px #D4A017;
        }

        .profile-circle:hover {
            transform: scale(1.1);
        }

        .settings-icon {
            font-size: 30px;
            cursor: pointer;
            transition: transform 0.3s;
            color: #6D8299;
            text-shadow: 0 0 5px #6D8299;
        }

        body.dark .settings-icon {
            color: #D4A017;
            text-shadow: 0 0 5px #D4A017;
        }

        .settings-icon:hover {
            transform: scale(1.1);
        }

        .profile-options, .settings-options {
            display: none;
            position: absolute;
            top: 70px;
            right: 0;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            padding: 10px;
            z-index: 20;
        }

        .profile-options a, .settings-options a {
            display: block;
            padding: 5px;
            text-decoration: none;
            color: inherit;
        }

        .home-container, .page-container {
            padding: 40px;
            text-align: center;
            min-height: calc(100vh - 150px);
            position: relative;
            overflow: hidden;
        }

        .hero-banner {
            padding: 50px;
            border-radius: 25px;
            margin-bottom: 40px;
            animation: fadeIn 1s ease-in, pulse 4s infinite;
        }

        .page-container {
            padding: 50px;
            border-radius: 25px;
            margin-bottom: 40px;
            animation: fadeIn 1s ease-in;
        }

        .hero-banner h1 {
            font-family: 'Georgia', serif;
            font-size: 68px;
            margin: 0 0 20px;
            color: #6D8299;
            text-shadow: 0 0 20px #6D8299;
        }

        body.dark .hero-banner h1 {
            color: #D4A017;
            text-shadow: 0 0 20px #D4A017;
        }

        #chat-page h1 {
            font-family: 'Georgia', serif;
            font-size: 68px;
            margin: 0 0 20px;
            color: #6D8299;
            text-shadow: 0 0 20px #6D8299;
        }

        body.dark #chat-page h1 {
            color: #D4A017;
            text-shadow: 0 0 20px #D4A017;
        }

        #journal-page h1 {
            font-family: 'Georgia', serif;
            font-size: 68px;
            margin: 0 0 20px;
            color: #6D8299;
            text-shadow: 0 0 20px #6D8299;
        }

        body.dark #journal-page h1 {
            color: #D4A017;
            text-shadow: 0 0 20px #D4A017;
        }

        #wellness-page h1 {
            font-family: 'Georgia', serif;
            font-size: 68px;
            margin: 0 0 20px;
            color: #6D8299;
            text-shadow: 0 0 20px #6D8299;
        }

        body.dark #wellness-page h1 {
            color: #D4A017;
            text-shadow: 0 0 20px #D4A017;
        }

        #memories-page h1 {
            font-family: 'Georgia', serif;
            font-size: 68px;
            margin: 0 0 20px;
            color: #6D8299;
            text-shadow: 0 0 20px #6D8299;
        }

        body.dark #memories-page h1 {
            color: #D4A017;
            text-shadow: 0 0 20px #D4A017;
        }

        .hero-banner p, .page-container p {
            font-size: 24px;
            font-style: italic;
            margin-bottom: 25px;
            color: #D8A7B1;
        }

        .hero-banner button {
            background: #D4A017;
            color: #2F2F2F;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            box-shadow: 0 5px 15px #6D8299;
            text-shadow: 0 0 5px #D4A017;
        }

        body.dark .hero-banner button {
            background: #D8A7B1;
            color: #2F2F2F;
            box-shadow: 0 5px 15px #D4A017;
            text-shadow: 0 0 5px #D8A7B1;
        }

        .hero-banner button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px #6D8299;
        }

        .mood-prompt {
            padding: 25px;
            border-radius: 15px;
            animation: float 3s infinite;
            text-align: center;
            max-width: 800px;
            margin: 40px auto;
        }

        .mood-prompt h3 {
            font-size: 28px;
            margin-bottom: 20px;
            font-family: 'Pacifico', cursive;
            color: #6D8299;
            text-shadow: 0 0 10px #6D8299;
        }

        body.dark .mood-prompt h3 {
            color: #D4A017;
            text-shadow: 0 0 10px #D4A017;
        }

        .mood-prompt input {
            width: 70%;
            padding: 12px;
            border-radius: 10px;
            margin: 10px 0;
            transition: box-shadow 0.3s;
            font-size: 16px;
        }

        .emoji-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .emoji-buttons button, .action-btn, .wellness-btn, .chat-btn {
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s;
            font-size: 16px;
        }

        .emoji-buttons button:hover, .action-btn:hover, .wellness-btn:hover, .chat-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(109, 130, 153, 0.5);
        }

        body.dark .emoji-buttons button:hover, body.dark .action-btn:hover, body.dark .wellness-btn:hover, body.dark .chat-btn:hover {
            box-shadow: 0 6px 20px rgba(212, 160, 23, 0.5);
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
            margin-top: 40px;
        }

        .home-card, .card {
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s;
            text-align: center;
            position: relative;
            min-height: 200px;
        }

        .home-card:hover, .card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(109, 130, 153, 0.3);
        }

        body.dark .home-card:hover, body.dark .card:hover {
            box-shadow: 0 10px 25px rgba(212, 160, 23, 0.5);
        }

        .home-card h3, .card h3 {
            font-size: 24px;
            margin: 0 0 15px;
        }

        .home-card p, .card p {
            font-size: 16px;
            margin-bottom: 20px;
        }

        #journal-page #journal-feedback p:hover {
            transform: none !important;
        }

        #journal-page #journal-feedback:hover {
            transform: none !important;
            box-shadow: 0 6px 20px rgba(109, 130, 153, 0.1);
        }

        #journal-page #save-journal {
            margin-bottom: 30px;
        }

        #journal-page #journal-feedback {
            margin-top: 20px;
        }

        .mood-feedback {
            text-align: center;
            font-size: 20px;
            padding: 15px;
            color: #6D8299;
            margin-top: 20px;
            opacity: 0;
            transition: opacity 0.5s;
            text-shadow: 0 0 5px #6D8299;
        }

        body.dark .mood-feedback {
            color: #D4A017;
            text-shadow: 0 0 5px #D4A017;
        }

        .mood-feedback.show {
            opacity: 1;
        }

        .chat-container {
            height: 65vh;
            overflow-y: auto;
            padding: 20px;
            border-radius: 10px;
            transition: background 0.5s;
        }

        .chat-bubble-user {
            border-radius: 15px 15px 0 15px;
            padding: 10px 15px;
            margin: 10px;
            max-width: 60%;
            align-self: flex-end;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            float: right;
            clear: both;
        }

        .chat-bubble-ai {
            border-radius: 15px 15px 15px 0;
            padding: 10px 15px;
            margin: 10px;
            max-width: 60%;
            align-self: flex-start;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            float: left;
            clear: both;
        }

        .input-bar {
            position: sticky;
            bottom: 0;
            padding: 15px;
            display: flex;
            gap: 15px;
            border-radius: 10px;
        }

        .input-bar input {
            flex: 8;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #6D8299;
            font-size: 16px;
            background: #2F2F2F;
        }

        body.dark .input-bar input {
            border: 1px solid #D4A017;
            background: #2F2F2F;
            color: #D8A7B1;
        }

        .input-bar button {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .journal-input {
            width: 100%;
            height: 400px;
            padding: 12px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 16px;
            background: #2F2F2F;
            border: 1px solid #6D8299;
            color: #A9B7A0;
        }

        body.dark .journal-input {
            background: #2F2F2F;
            border: 1px solid #D4A017;
            color: #D8A7B1;
        }

        .sentiment-meter {
            text-align: center;
            font-size: 18px;
            margin: 15px 0;
            padding: 10px;
            border-radius: 10px;
            background: rgba(47, 47, 47, 0.8);
        }

        .expander {
            background: rgba(47, 47, 47, 0.7);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #6D8299;
        }

        body.dark .expander {
            background: rgba(47, 47, 47, 0.7);
            border: 1px solid #D4A017;
        }

        .expander details {
            cursor: pointer;
        }

        body.light .expander details {
            display: block;
        }

        body.light .expander summary {
            cursor: pointer;
            color: #6D8299;
        }

        body.dark .expander summary {
            color: #D4A017;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 16px;
            background: #2F2F2F;
            border: 1px solid #6D8299;
            color: #A9B7A0;
        }

        body.dark .search-input {
            background: #2F2F2F;
            border: 1px solid #D4A017;
            color: #D8A7B1;
        }

        #mood-display {
            color: #6D8299;
            text-shadow: 0 0 5px #6D8299;
        }

        body.dark #mood-display {
            color: #D4A017;
            text-shadow: 0 0 5px #D4A017;
        }

        #open-camera-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 30px;
            font-size: 18px;
            margin: 50px auto 50px auto; /* Center button with top/bottom margin */
            width: fit-content; /* Ensure button width fits content */
        }

        #mood-display {
            font-size: 20px;
            text-align: center;
        }

        #wellness-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Align content towards top */
        }

        #memories-page .card {
            padding: 10px;
            min-height: 80px;
        }

        #memories-page #memories-content {
            display: grid;
            gap: 30px;
        }

        .hidden {
            display: none;
        }

        .footer {
            padding: 20px;
            text-align: center;
            margin-top: 20px;
        }

        .footer a {
            text-decoration: none;
            margin: 0 10px;
            text-shadow: 0 0 5px #6D8299;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: center;
                padding: 15px;
            }

            .header .logo {
                margin-bottom: 10px;
            }

            .header h1 {
                font-size: 48px;
                margin-bottom: 10px;
            }

            .right-container {
                align-items: center;
                width: 100%;
            }

            .nav-container {
                justify-content: center;
                gap: 10px;
                padding-top: 5px;
            }

            .nav-link {
                font-size: 16px;
            }

            .icons-container {
                margin-bottom: 10px;
            }

            .home-container, .page-container {
                padding: 20px;
            }

            .hero-banner, .page-container {
                padding: 30px;
            }

            .hero-banner h1, #chat-page h1, #journal-page h1, #wellness-page h1, #memories-page h1 {
                font-size: 52px;
            }

            .mood-prompt input, .journal-input, .search-input {
                width: 90%;
            }

            .mood-prompt {
                margin: 20px auto;
            }

            .actions-grid {
                margin-top: 20px;
            }

            .chat-container {
                height: 50vh;
            }

            #open-camera-btn {
                margin: 30px auto 30px auto; /* Smaller margins for mobile */
            }
        }
    </style>
</head>
<body class="light">
    <!-- Header -->
    <div class="header">
        <div class="logo"></div>
        <h1>SoulMate.AGI</h1>
        <div class="right-container">
            <div class="icons-container">
                <div class="profile-container">
                    <img src="default_user.jpg" class="profile-circle" id="profile-image" alt="Profile">
                    <div class="profile-options" id="profile-options"></div>
                </div>
                <div class="settings-container">
                    <div class="settings-icon">⚙️</div>
                    <div class="settings-options" id="settings-options">
                        <a href="#" data-option="Light Theme">Light Theme</a>
                        <a href="#" data-option="Dark Theme">Dark Theme</a>
                        <a href="#" data-option="Help">Help</a>
                    </div>
                </div>
            </div>
            <div class="nav-container">
                <a class="nav-link" data-page="Home">Home</a>
                <a class="nav-link" data-page="Chat">Chat</a>
                <a class="nav-link" data-page="Journal">Journal</a>
                <a class="nav-link" data-page="Wellness">Wellness</a>
                <a class="nav-link" data-page="Memories">Memories</a>
                <a class="nav-link" data-page="Help">Help</a>
            </div>
        </div>
    </div>

    <!-- Advanced Thematic Motion Graphics Background -->
    <div class="dynamic-bg">
        <!-- Heartbeat Pulses -->
        <div class="pulse-ring" style="top: 20%; left: 20%; width: 100px; height: 100px;"></div>
        <div class="pulse-ring" style="top: 60%; left: 70%; width: 150px; height: 150px; animation-delay: 1s;"></div>
        <!-- Flowing Energy Lines -->
        <div class="energy-line" style="top: 10%; animation-delay: 0s;"></div>
        <div class="energy-line" style="top: 50%; animation-delay: 2s;"></div>
        <div class="energy-line" style="top: 90%; animation-delay: 4s;"></div>
        <!-- Evolving Shapes -->
        <div class="evolving-shape" style="top: 30%; left: 10%; width: 100px; height: 100px;"></div>
        <div class="evolving-shape" style="top: 70%; left: 60%; width: 120px; height: 120px; animation-delay: 2s;"></div>
        <!-- Particle Swirls -->
        <div class="particle-swirl" style="top: 15%; left: 25%; width: 10px; height: 10px; animation-delay: 0s;"></div>
        <div class="particle-swirl" style="top: 45%; left: 75%; width: 15px; height: 15px; animation-delay: 3s;"></div>
        <div class="particle-swirl" style="top: 85%; left: 40%; width: 12px; height: 12px; animation-delay: 1s;"></div>
    </div>

    <!-- Pages -->
    <div id="home-page" class="home-container">
        <div class="hero-banner">
            <h1>Welcome to SoulMate.AGI! 🌟</h1>
            <p>Your journey to emotional well-being starts here. ✨</p>
            <button class="action-btn" data-page="Chat">Begin Your Journey</button>
        </div>
        <div class="actions-grid">
            <div class="home-card">
                <h3>💬 Chat with Me</h3>
                <p>Share your thoughts with personalized responses.</p>
                <button class="action-btn" data-page="Chat">Go</button>
            </div>
            <div class="home-card">
                <h3>✍️ Write a Journal</h3>
                <p>Reflect and gain AI insights.</p>
                <button class="action-btn" data-page="Journal">Go</button>
            </div>
            <div class="home-card">
                <h3>❤️ Feel Better</h3>
                <p>Enjoy affirmations and relaxation tools.</p>
                <button class="action-btn" data-page="Wellness">Go</button>
            </div>
            <div class="home-card">
                <h3>⏳ Recall Memories</h3>
                <p>Relive your journey and grow.</p>
                <button class="action-btn" data-page="Memories">Go</button>
            </div>
        </div>
        <div class="mood-prompt">
            <h3>How are you feeling today? 🌈</h3>
            <input type="text" id="mood-input" placeholder="Tell me briefly...">
            <div class="emoji-buttons">
                <button class="emoji-btn" data-mood="Happy">Happy 😊</button>
                <button class="emoji-btn" data-mood="Sad">Sad 😢</button>
                <button class="emoji-btn" data-mood="Stressed">Stressed 😓</button>
            </div>
        </div>
        <div class="mood-feedback" id="mood-feedback"></div>
    </div>

    <div id="chat-page" class="page-container hidden">
        <h1>Chat with SoulMate.AGI</h1>
        <div class="chat-container" id="chat-container"></div>
        <div class="input-bar">
            <input type="text" id="chat-input" placeholder="Talk to me...">
            <button class="chat-btn" id="voice-btn">🎙️</button>
            <button class="chat-btn" id="send-btn">➡️</button>
        </div>
        <div style="display: flex; gap: 20px; margin-top: 20px; justify-content: center;">
            <button class="chat-btn" id="quick-more">Tell me more</button>
            <button class="chat-btn" id="quick-down">I'm feeling down</button>
        </div>
    </div>

    <div id="journal-page" class="page-container hidden">
        <h1>Your Journal</h1>
        <p style="font-size: 14px;">🔒 Your thoughts are encrypted and private.</p>
        <textarea class="journal-input" id="journal-input" placeholder="Write what's on your mind..."></textarea>
        <div class="sentiment-meter">Sentiment: Neutral (updates as you type)</div>
        <button class="action-btn" id="save-journal">Save Journal</button>
        <div class="card" id="journal-feedback">
            <p>That sounds heavy; want to talk?</p>
            <button class="action-btn" data-page="Chat">Continue in Chat</button>
        </div>
        <details class="expander">
            <summary>See Past Journals</summary>
            <div id="past-journals">
                <p>April 10, 2025: Feeling Hopeful</p>
                <p>April 5, 2025: A tough day...</p>
            </div>
            <input type="text" class="search-input" id="journal-search" placeholder="By date or keyword">
        </details>
    </div>

    <div id="wellness-page" class="page-container hidden">
        <h1>Wellness Mode</h1>
        <button class="wellness-btn" id="open-camera-btn">📷 Open the camera to check your mood</button>
        <div id="mood-display">
            You are in <span id="detected-mood">______</span> mood
        </div>
    </div>

    <div id="memories-page" class="page-container hidden">
        <h1>Your Memories</h1>
        <input type="text" class="search-input" id="memory-search" placeholder="What did I say about my job?">
        <div id="memories-content">
            <div class="card"><p><b>April 5, 2025</b>: You shared a happy moment about a friend.</p></div>
            <div class="card"><p><b>April 1, 2025</b>: You felt stressed about work.</p></div>
            <div class="card"><h3>Personal Growth</h3><p>You've been happier this month!</p></div>
        </div>
    </div>

    <div id="help-page" class="page-container hidden">
        <h1>Help - SoulMate.AGI</h1>
        <div class="card">
            <h3>About SoulMate.AGI</h3>
            <p>SoulMate.AGI is your personalized, evolving AI companion designed to provide emotional support, companionship, and intelligent conversation. Built with advanced AI, it learns from your daily interactions to become a lifelong friend, mentor, and wellness guide.</p>
            <h3>Features</h3>
            <ul>
                <li><b>Chat</b>: Talk anytime via text or voice, with empathetic responses tailored to your mood.</li>
                <li><b>Journal</b>: Express your thoughts privately, with AI insights to support reflection.</li>
                <li><b>Wellness</b>: Enjoy affirmations, humor, breathing exercises, stories, and music suggestions to uplift you.</li>
                <li><b>Memories</b>: Recall past moments and track your personal growth.</li>
                <li><b>Insights</b>: Visualize mood trends and activity patterns for self-awareness.</li>
            </ul>
            <h3>How It Works</h3>
            <p>SoulMate.AGI starts with a powerful AI model and adapts nightly using your interactions, stored securely in an encrypted memory vault. It detects emotional cues to offer proactive support, especially for loneliness or stress.</p>
            <h3>Privacy</h3>
            <p>Your data is yours. All interactions are encrypted, and you can export your data anytime. We never share your information.</p>
            <h3>Contact Us</h3>
            <p>Need help? Reach out at support@soulmate.ai (placeholder).</p>
        </div>
    </div>
    <!-- Your existing HTML -->
    <button id="mic-button">
    🎤
  </button>
  
  <div id="output" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;"></div>
  

    <!-- Footer -->
    <div class="footer">
        <p>
            <a href="#">About SoulMate.AGI</a> | 
            <a href="#">Privacy Policy</a> | 
            <a href="#">Contact Us</a>
        </p>
        <p>Nightly Training: Last updated April 10, 2025</p>
    </div>

    <script>
        // State Management
        let state = {
            page: localStorage.getItem('page') || 'Home',
            chat_history: JSON.parse(localStorage.getItem('chat_history')) || [],
            mood: localStorage.getItem('mood') || null,
            logged_in: JSON.parse(localStorage.getItem('logged_in')) || false,
            profile_image: localStorage.getItem('profile_image') || 'default_user.jpg',
            google_profile_image: localStorage.getItem('google_profile_image') || null,
            theme: localStorage.getItem('theme') || 'Light',
            journals: JSON.parse(localStorage.getItem('journals')) || [
                { date: 'April 10, 2025', content: 'Feeling Hopeful' },
                { date: 'April 5, 2025', content: 'A tough day...' }
            ],
            detected_mood: localStorage.getItem('detected_mood') || '______'
        };

        // Initialize
        document.body.classList.add(state.theme.toLowerCase());
        updateProfileImage();
        updateMoodDisplay();

        // Update Profile Image
        function updateProfileImage() {
            const profileImage = document.getElementById('profile-image');
            if (state.logged_in && state.google_profile_image) {
                profileImage.src = state.google_profile_image;
            } else {
                profileImage.src = state.profile_image;
            }
        }

        // Update Mood Display
        function updateMoodDisplay() {
            const moodSpan = document.getElementById('detected-mood');
            if (moodSpan) {
                moodSpan.textContent = state.detected_mood;
            }
        }

        // Profile Options
        const profileImage = document.getElementById('profile-image');
        const profileOptions = document.getElementById('profile-options');

        const updateProfileOptions = () => {
            if (!state.logged_in) {
                profileOptions.innerHTML = `
                    <a href="#" id="show-profile">Show Profile Picture</a>
                    <a href="#" id="login-option">Log In</a>
                `;
                document.getElementById('show-profile').addEventListener('click', (e) => {
                    e.preventDefault();
                    alert(`Your current profile picture is: ${state.profile_image}`);
                    profileOptions.style.display = 'none';
                });
                document.getElementById('login-option').addEventListener('click', (e) => {
                    e.preventDefault();
                    state.logged_in = true;
                    state.google_profile_image = 'https://via.placeholder.com/60?text=Google+Profile';
                    localStorage.setItem('logged_in', true);
                    localStorage.setItem('google_profile_image', state.google_profile_image);
                    updateProfileImage();
                    updateProfileOptions();
                    alert('Logged in with Google! (Simulated)');
                    profileOptions.style.display = 'none';
                });
            } else {
                profileOptions.innerHTML = `
                    <a href="#" id="edit-profile">Edit Profile Image</a>
                    <a href="#" id="logout">Log Out</a>
                `;
                document.getElementById('edit-profile').addEventListener('click', (e) => {
                    e.preventDefault();
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = 'image/png,image/jpeg';
                    input.onchange = (event) => {
                        const file = event.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                state.profile_image = e.target.result;
                                localStorage.setItem('profile_image', state.profile_image);
                                updateProfileImage();
                                alert('Profile image updated!');
                            };
                            reader.readAsDataURL(file);
                        }
                    };
                    input.click();
                    profileOptions.style.display = 'none';
                });
                document.getElementById('logout').addEventListener('click', (e) => {
                    e.preventDefault();
                    state.logged_in = false;
                    state.google_profile_image = null;
                    localStorage.setItem('logged_in', false);
                    localStorage.setItem('google_profile_image', null);
                    updateProfileImage();
                    updateProfileOptions();
                    alert('Logged out!');
                    profileOptions.style.display = 'none';
                });
            }
        };

        profileImage.addEventListener('click', () => {
            profileOptions.style.display = profileOptions.style.display === 'block' ? 'none' : 'block';
            settingsOptions.style.display = 'none';
        });

        updateProfileOptions();

        // Settings Options
        const settingsIcon = document.querySelector('.settings-icon');
        const settingsOptions = document.getElementById('settings-options');

        settingsIcon.addEventListener('click', () => {
            settingsOptions.style.display = settingsOptions.style.display === 'block' ? 'none' : 'block';
            profileOptions.style.display = 'none';
        });

        settingsOptions.addEventListener('click', (e) => {
            const option = e.target.dataset.option;
            if (option === 'Light Theme') {
                state.theme = 'Light';
                localStorage.setItem('theme', 'Light');
                document.body.classList.remove('dark');
                document.body.classList.add('light');
            } else if (option === 'Dark Theme') {
                state.theme = 'Dark';
                localStorage.setItem('theme', 'Dark');
                document.body.classList.remove('light');
                document.body.classList.add('dark');
            } else if (option === 'Help') {
                switchPage('Help');
            }
            settingsOptions.style.display = 'none';
            e.preventDefault();
        });

        // Page Navigation
        const pages = ['home', 'chat', 'journal', 'wellness', 'memories', 'help'];
        const switchPage = (page) => {
            state.page = page;
            localStorage.setItem('page', page);
            pages.forEach(p => {
                document.getElementById(`${p}-page`).classList.add('hidden');
            });
            document.getElementById(`${page.toLowerCase()}-page`).classList.remove('hidden');
            if (page === 'Chat') renderChat();
            if (page === 'Journal') renderJournals();
            if (page === 'Wellness') setupCameraButton();
        };

        document.querySelectorAll('.nav-link, .action-btn').forEach(el => {
            el.addEventListener('click', (e) => {
                const page = el.dataset.page;
                if (page) {
                    switchPage(page);
                    e.preventDefault();
                }
            });
        });

        switchPage(state.page);

        // Home Page: Mood Handling
        const moodInput = document.getElementById('mood-input');
        const emojiButtons = document.querySelectorAll('.emoji-btn');
        const moodFeedback = document.getElementById('mood-feedback');

        moodInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const mood = moodInput.value.trim();
                if (mood) {
                    state.mood = mood;
                    localStorage.setItem('mood', mood);
                    moodFeedback.textContent = `Thanks for sharing: ${mood}. How can I assist?`;
                    moodFeedback.classList.add('show');
                    setTimeout(() => moodFeedback.classList.remove('show'), 3000);
                    moodInput.value = '';
                }
            }
        });

        emojiButtons.forEach(button => {
            button.addEventListener('click', () => {
                const mood = button.dataset.mood;
                state.mood = mood;
                localStorage.setItem('mood', mood);
                moodFeedback.textContent = `Got it! You're feeling ${mood}. I'm here for you! 🎉`;
                moodFeedback.classList.add('show');
                setTimeout(() => moodFeedback.classList.remove('show'), 3000);
            });
        });

        // Chat Page
        const renderChat = () => {
            const chatContainer = document.getElementById('chat-container');
            const chatBg = {
                Happy: 'background: linear-gradient(135deg, #A9B7A0, #6D8299);',
                Sad: 'background: linear-gradient(135deg, #6D8299, #D8A7B1);',
                Stressed: 'background: linear-gradient(135deg, #D4A017, #2F2F2F);',
                null: 'background: rgba(47, 47, 47, 0.7);'
            }[state.mood] || 'background: rgba(47, 47, 47, 0.7);';
            chatContainer.style = chatBg;
            chatContainer.innerHTML = state.chat_history.map(msg => `
                <div class="chat-bubble-${msg.role}">${msg.content}</div>
            `).join('');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        };

        document.getElementById('send-btn').addEventListener('click', () => {
            const chatInput = document.getElementById('chat-input');
            if (chatInput.value.trim()) {
                state.chat_history.push({ role: 'user', content: chatInput.value });
                state.chat_history.push({ role: 'ai', content: `I hear you! You said: ${chatInput.value}` });
                localStorage.setItem('chat_history', JSON.stringify(state.chat_history));
                renderChat();
                chatInput.value = '';
            }
        });

        document.getElementById('chat-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') document.getElementById('send-btn').click();
        });

        document.getElementById('voice-btn').addEventListener('click', () => {
            alert('Voice input coming soon!');
        });

        document.getElementById('quick-more').addEventListener('click', () => {
            state.chat_history.push({ role: 'user', content: 'Tell me more' });
            state.chat_history.push({ role: 'ai', content: "Sure, what's on your mind?" });
            localStorage.setItem('chat_history', JSON.stringify(state.chat_history));
            renderChat();
        });

        document.getElementById('quick-down').addEventListener('click', () => {
            state.chat_history.push({ role: 'user', content: "I'm feeling down" });
            state.chat_history.push({ role: 'ai', content: "I'm here for you. Want to share more?" });
            localStorage.setItem('chat_history', JSON.stringify(state.chat_history));
            renderChat();
        });

        // Journal Page
        const renderJournals = () => {
            const pastJournals = document.getElementById('past-journals');
            pastJournals.innerHTML = state.journals.map(j => `<p>${j.date}: ${j.content}</p>`).join('');
        };

        document.getElementById('save-journal').addEventListener('click', () => {
            const journalInput = document.getElementById('journal-input');
            if (journalInput.value.trim()) {
                state.journals.push({
                    date: new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }),
                    content: journalInput.value
                });
                localStorage.setItem('journals', JSON.stringify(state.journals));
                renderJournals();
                alert('Journal saved securely!');
                journalInput.value = '';
            }
        });

        document.getElementById('journal-search').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const pastJournals = document.getElementById('past-journals');
            pastJournals.innerHTML = state.journals
                .filter(j => j.date.toLowerCase().includes(query) || j.content.toLowerCase().includes(query))
                .map(j => `<p>${j.date}: ${j.content}</p>`).join('');
        });

        // Wellness Page: Camera Button
        function setupCameraButton() {
            const cameraBtn = document.getElementById('open-camera-btn');
            if (cameraBtn) {
                cameraBtn.addEventListener('click', async () => {
                    try {
                        const response = await fetch('http://localhost:5000/get_mood');
                        if (!response.ok) {
                            throw new Error('Failed to fetch mood');
                        }
                        const data = await response.json();
                        state.detected_mood = data.mood;
                        localStorage.setItem('detected_mood', state.detected_mood);
                        updateMoodDisplay();
                        alert('Mood detected: ' + state.detected_mood);
                    } catch (error) {
                        console.error('Error fetching mood:', error);
                        alert('Could not connect to mood detection server. Please ensure it is running.');
                    }
                });
            }
        }

        // Memories Page
        document.getElementById('memory-search').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const memoriesContent = document.getElementById('memories-content');
            const memories = [
                { date: 'April 5, 2025', content: 'You shared a happy moment about a friend.' },
                { date: 'April 1, 2025', content: 'You felt stressed about work.' },
                { date: null, content: 'Personal Growth: You\'ve been happier this month!', isGrowth: true }
            ];
            memoriesContent.innerHTML = memories
                .filter(m => query === '' || m.content.toLowerCase().includes(query) || (m.date && m.date.toLowerCase().includes(query)))
                .map(m => `
                    <div class="card">
                        ${m.isGrowth ? `<h3>${m.content.split(': ')[0]}</h3><p>${m.content.split(': ')[1]}</p>` : `<p><b>${m.date}</b>: ${m.content}</p>`}
                    </div>
                `).join('');
        });

        // Title Animation
        const title = document.querySelector('.header h1');
        title.style.opacity = 0;
        setTimeout(() => {
            title.style.transition = 'opacity 1s';
            title.style.opacity = 1;
        }, 100);
    </script>
    <script>
        const micButton = document.getElementById("mic-button");
        const outputDiv = document.getElementById("output");
      
        let recognition;
        if ('webkitSpeechRecognition' in window) {
          recognition = new webkitSpeechRecognition();
        } else if ('SpeechRecognition' in window) {
          recognition = new SpeechRecognition();
        } else {
          alert("Speech Recognition not supported in your browser.");
        }
      
        if (recognition) {
          recognition.continuous = false;
          recognition.lang = 'en-US';
          recognition.interimResults = false;
      
          recognition.onstart = () => {
            outputDiv.textContent = "Listening...";
          };
      
          recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            outputDiv.textContent = "You said: " + transcript;
            // Optional: You can send the transcript to your backend here
          };
      
          recognition.onerror = (event) => {
            outputDiv.textContent = "Error: " + event.error;
          };
      
          recognition.onend = () => {
            console.log("Recognition ended");
          };
      
          micButton.addEventListener("click", () => {
            recognition.start();
          });
        }
      </script>
      <script>
        const chatInput = document.getElementById("chat-input");
        const sendBtn = document.getElementById("send-btn");
        const voiceBtn = document.getElementById("voice-btn");
        const chatContainer = document.getElementById("chat-container");
        
        let recognition;
        
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
        } else if ('SpeechRecognition' in window) {
            recognition = new SpeechRecognition();
        } else {
            alert("Speech Recognition not supported in your browser.");
        }
        
        // 🎙️ When mic is clicked
        voiceBtn.addEventListener("click", () => {
            if (!recognition) return;
            recognition.lang = "en-US";
            recognition.start();
        });
        
        // 🎤 On speech result
        if (recognition) {
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                chatInput.value = transcript;
                sendMessage(transcript);
            };
        }
        
        // ➡️ Button click to send
        sendBtn.addEventListener("click", () => {
            const message = chatInput.value.trim();
            if (message) {
                sendMessage(message);
            }
        });
        
        // Send text to Flask backend
        async function sendMessage(message) {
            addChatBubble("user", message);
            chatInput.value = "";
        
            try {
                const res = await fetch("http://127.0.0.1:5000/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message })
                });
        
                const data = await res.json();
                addChatBubble("ai", data.reply);
            } catch (error) {
                addChatBubble("ai", "⚠️ Error contacting the server.");
            }
        }
        
        // Show in chat bubble
        function addChatBubble(role, text) {
            const bubble = document.createElement("div");
            bubble.className = `chat-bubble-${role}`;
            bubble.textContent = text;
            chatContainer.appendChild(bubble);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        </script>
        
        
      
</body>
</html>